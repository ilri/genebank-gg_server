<%@ Page Language="C#" AutoEventWireup="true" MasterPageFile="~/Site1.Master" CodeBehind="userfavorite.aspx.cs" Inherits="GrinGlobal.Web.UserFavorite" %>

<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="server">

    <script type='text/javascript'>
        $(document).ready(function() {
        });
    </script>

</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="cphBody" runat="server">
    <h1>My Favorites 
        <asp:Label ID="lblCnt" runat="server" Text=""></asp:Label>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <asp:Button ID="btnExport" runat="server" onclick="btnExport_Click" 
        Text="Export My Favorites to Excel" /></h1>
    
<asp:TreeView ID="tvFavorite" runat="server" AutoGenerateDataBindings="false" HoverNodeStyle-Font-Underline="true" 
        onselectednodechanged="tvFavorite_SelectedNodeChanged" 
        Font-Bold="True" ShowLines="False" ImageSet="BulletedList">
<HoverNodeStyle Font-Underline="True"></HoverNodeStyle>
</asp:TreeView> 

    

<asp:GridView ID="gvFavorite" runat="server" ShowFooter="True" 
        AutoGenerateColumns="False" DataKeyNames="accession_id" CssClass="grid" 
        onrowDeleting="gvFavorite_RowDeleting" OnRowUpdating="gvFavorite_RowUpdating"
        onrowEditing="gvFavorite_RowEditing" onrowdatabound="gvFavorite_RowDataBound"
        onRowCancelingEdit="gvFavorite_RowCancelingEdit" 
        onRowcommand="gvFavorite_RowCommand">
    <AlternatingRowStyle CssClass="altrow" />
<EmptyDataTemplate>
    You have no favorite accession.
</EmptyDataTemplate>
<Columns>
    <asp:TemplateField HeaderText="Select" ItemStyle-Width="15" ItemStyle-HorizontalAlign="Center" FooterStyle-HorizontalAlign="Center">
        <ItemTemplate>
            <asp:CheckBox ID="chkSelect" runat="server" />
        </ItemTemplate>
        <FooterTemplate>
         <br />
         <asp:LinkButton ID="btnCheckAll" runat="server" CssClass="system" Text="Select All" OnClick="btnCheckAll_Click"></asp:LinkButton>
        </FooterTemplate>
    </asp:TemplateField>
    <asp:TemplateField HeaderText="ID">
        <ItemTemplate>
            <a href="AccessionDetail.aspx?id=<%# Eval("accession_id") %>"><%#Eval("pi_number") %></a>
            <asp:ImageButton ID="btnInfor" runat="server" ImageUrl="~/images/Information.ico" Visible="False" />
        </ItemTemplate>
    </asp:TemplateField>
     <asp:TemplateField HeaderText="Usage">
        <ItemTemplate>
            <asp:DropDownList runat="server" ID="ddlUseCategory" DataTextField="Text" DataValueField="Value" AutoPostBack="true" OnSelectedIndexChanged="changedUseCategory"></asp:DropDownList>
        </ItemTemplate>
    </asp:TemplateField>
    <asp:TemplateField HeaderText="Comment">
       <EditItemTemplate> 
           <asp:TextBox ID="txtNote" runat="server" Text='<%# Eval("note") %>' TextMode="MultiLine" Width="400 px"></asp:TextBox>
       </EditItemTemplate>         
        <ItemTemplate>
            <asp:Label ID="lblNote" runat="server" Text='<%# Eval("note") %>' Width="400 px"></asp:Label> 
        </ItemTemplate>
    </asp:TemplateField>
    <asp:TemplateField>
        <EditItemTemplate> 
            <asp:LinkButton ID="LinkButton1" runat="server" CausesValidation="True" CommandName="Update" Text="Update"></asp:LinkButton> 
            <asp:LinkButton ID="LinkButton2" runat="server" CausesValidation="False" CommandName="Cancel" Text="Cancel"></asp:LinkButton> 
        </EditItemTemplate> 
        <ItemTemplate>
            <asp:LinkButton ID="btnEdit" runat="server" CssClass="system" Text="Edit" CommandName="Edit" ToolTip="Edit comment for this accession favorite"></asp:LinkButton>
        </ItemTemplate>
    </asp:TemplateField>
    <asp:TemplateField>
        <ItemTemplate>
            <asp:LinkButton ID="btnRemove" runat="server" CssClass="system" Text="Remove" CommandName="Delete" OnClientClick="javascript:return confirm('Are you sure you want to remove this item from your favorites?');" ToolTip="Remove this accession from My Favorites"></asp:LinkButton>
        </ItemTemplate>
        <FooterTemplate>
           <br />
           <asp:LinkButton ID="btnRemoveSelected" runat="server" CssClass="system" Text="Remove Selected" OnClick="btnRemoveSelected_Click" OnClientClick="javascript:return confirm('Are you sure you want to remove all selected items from your favorites?');" ToolTip="Remove selected accession(s) from My Favorites"></asp:LinkButton>
           <br /> <br />
            <asp:LinkButton ID="btnRemoveAll" runat="server" CssClass="system" Text="Remove All" OnClick="btnRemoveAll_Click" OnClientClick="javascript:return confirm('Are you sure you want to remove all items from your favorites?');" ToolTip="Remove all accession(s) from My Favorites"></asp:LinkButton>
        </FooterTemplate>
     </asp:TemplateField>
    <asp:TemplateField>
         <ItemTemplate>
            <asp:LinkButton ID="btnAdd" runat="server" CssClass="system" Text="Add To Order" CommandName="Add" CommandArgument='<%# Eval("accession_id") %>' ToolTip="Add this accession to the order list" Visible="True"></asp:LinkButton>
            <asp:Label runat="server" ID="lblNotAvailable" Visible="False" Font-Bold="True" ForeColor="Red">Not Available</asp:Label>
        </ItemTemplate>
        <FooterTemplate>
            <br />
            <asp:LinkButton ID="btnAddSelected" runat="server" CssClass="system" Text="Add Selected" OnClick="btnAddSelected_Click" ToolTip="Add selected accession(s) to the order list"></asp:LinkButton>
        </FooterTemplate>
    </asp:TemplateField>
  </Columns>
</asp:GridView>
<br />
<asp:Panel ID="Panel1" runat="server" Visible="False">
<asp:GridView ID="gv" runat="server" AutoGenerateColumns="False">
<Columns>
    <asp:BoundField DataField="pi_number" HeaderText="PI Number" />
    <asp:BoundField DataField="usage_code" HeaderText="Usage Code" />
    <asp:BoundField DataField="note" HeaderText="Note" />
    <asp:BoundField DataField="availability" HeaderText="Availability" />
</Columns>
</asp:GridView></asp:Panel>

</asp:Content>
